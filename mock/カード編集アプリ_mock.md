# カード編集アプリケーション - モック画面案

本モックは `spec/SW要求仕様書.md`、`spec/UI設計書.md`、`doc/操作ガイド.md` に記載された要件をもとに、Electron/React/TypeScript 製デスクトップアプリの代表的なメイン画面をテキストベースで可視化したものです。ライトモードを基調とし、キーボード／マウス操作の流れを想定した構成としています。

## 1. 全体レイアウト

```text
┌─────────────────────────────────────────────────────────────┐
│ メニューバー: ファイル(F) | 編集(E) | 表示(V) | ヘルプ(H)        高さ32px │
├─────────────────────────────────────────────────────────────┤
│ ツールバー  📂 開く  💾 保存  |  ⛓️ トレース表示 [ON]  ▼ 種別フィルタ  │
│           ──────────────────────────────────────────── │
│           |  ⊞ 水平分割  ⊟ 垂直分割                 高さ40px │
├───────────────┬────────────────────────────────────────────┤
│ サイドバー (幅256px) │ 分割ノードA                                                 │
│ ┌エクスプローラ────┐│ ┌タブバー─────────────────────────────────────────┐ │
│ │📁 プロジェクト    ││ │[📄 requirements.json ●]  [📄 design.json]      ➕            │ │
│ │ ├📄 cardset.md ● ││ ├───────────────────────────────────────────────────┤ │
│ │ └📄 trace.json   ││ │カードパネルツールバー:  ▼ 全展開  ▶ 全折畳  | 🔍 フィルタ | ☰ │ │
│ └────────────┘│ ├───────────────────────────────────────────────────┤ │
│ ┌検索/置換────────┐│ │パネルヘッダー: requirements.json                 カード数:128│ │
│ │🔍 キーワード……   ││ ├───────────────────────────────────────────────────┤ │
│ │[ 置換テキスト… ] ││ │ ● ▼ 📑 [Approved]  「1. システム概要」                      │ │
│ │[☑ 正規表現] [範囲▼]││ │    最終更新: 2025-10-19 14:30                                   │ │
│ └────────────────┘│ │ ○ ▶ 📝 [Draft]      「本アプリケーションは…」                 │ │
│                   │ │    最終更新: 2025-10-19 14:25                                   │ │
│                   │ │ ● ▶ • [Review]    「- 仕様／設計／設計経緯の…」              │ │
├───────────────┤ │ │ ○   • [Draft]      「- デジタル空間での情報連携…」         │ │
│ ログエリア (高さ可変)│ │ │ ● ▼ 🖼️ [Approved]  「図1: カード構造」                     │ │
│ ┌────────────┐│ │ │    最終更新: 2025-10-19 13:58                                   │ │
│ │動作ログ    [クリア]││ │ …（スクロール可能、階層に応じて 12 + n×24px インデント）… │ │
│ │[2025-10-19 14:31] ││ └───────────────────────────────────────────────────┘ │
│ │INFO: 保存しました ││                                                                 │
│ └────────────┘│ 分割ノードB（右側パネル。トレース表示ON時にコネクタ描画）             │
├───────────────┴────────────────────────────────────────────┤
│ ステータスバー: 総カード数 128 | 選択カード #12 | ● 未保存 | UTF-8 | ライトモード │ 24px │
└─────────────────────────────────────────────────────────────┘
```

- **サイドバー**: 上段にファイルエクスプローラ、下段に検索/置換フォーム。右境界をドラッグしてリサイズ可能。
- **分割ノード**: VSCode 風の再帰的スプリットを想定。図では左に1ノード、右に空きノードを配置。追加分割で3〜4ペイン表示も想定。
- **トレーサビリティコネクタ**: トレース表示がONの場合、左右パネルのカードの●接合点をベジェ曲線で接続（図には省略）。

## 2. カード表示の詳細（詳細モード）

```text
┌──────────────────────────────────────────┐
│ ● ▼ 📑  [Approved] 1. システム概要                             │
│ │ カード内容テキスト: 既存の大規模PJでは…                      │
│ │ 最終更新: 2025-10-19 14:30                                     │
└──────────────────────────────────────────┘
```

- **接合点 (●/○)**: トレース有無を示す。ドラッグ開始点にもなる。
- **展開トグル (▼/▶)**: 子カードの表示切替。
- **カード種別アイコン**: heading / paragraph / bullet / figure / table / test / qa。
- **ステータスバッジ**: draft / review / approved / deprecated を色分け。
- **テキストエリア**: ダブルクリックで編集。更新時刻は自動更新。

### コンパクト表示

```text
┌──────────────────────────────────────────┐
│ ○ ▶ 📝 [Draft] 本アプリケーションは…                          │
└──────────────────────────────────────────┘
```

- 高さ約32px、1行トランケート表示。
- ツールバーの ☰ ボタンで詳細表示⇔コンパクト表示を切り替え。

## 3. 操作導線（キーボード/マウス）

| 操作対象 | 主なアクション | インタラクション | 参照資料 |
|----------|----------------|-------------------|-----------|
| ファイル管理 | ファイルを開く、保存、名前を付けて保存 | メニュー、ツールバー、ドラッグ&ドロップ | SW要求仕様書 2.1 / 操作ガイド 基本操作 |
| カード編集 | 追加、削除、移動、Undo/Redo | コンテキストメニュー、ショートカット (`CTRL+Z/Y`) | SW要求仕様書 4.1 / 操作ガイド カード操作 |
| 検索/置換 | 文字列・正規表現検索、範囲選択 | サイドバー下部フォーム | SW要求仕様書 4.1 検索/置換 / 操作ガイド |
| トレーサビリティ | 表示トグル、種別フィルタ、接続操作 | ツールバー ⛓️ ボタン、ドラッグ操作 | SW要求仕様書 4.1 トレーサビリティ / 操作ガイド |
| 設定・ログ | ログレベル確認、表示モード切替 | ログエリア、テーマ設定 | SW要求仕様書 2.1, 2.2 / UI設計書 3.7 |

## 4. カラーパレット（ライトモード）

| 用途 | カラーコード | 備考 |
|------|--------------|------|
| メイン背景 | `#FFFFFF` | UI設計書 1.2 より |
| サブ背景（サイドバー/ログ） | `#F9FAFB` | |
| 境界線 | `#D1D5DB` | パネル境界・分割線 |
| 基本テキスト | `#111827` | 本文、ラベル |
| アクセント | `#3B82F6` | アクティブボタン、選択状態 |
| ステータス: Approved | 背景 `#D1FAE5` / 文字 `#065F46` | |
| ステータス: Review | 背景 `#FEF3C7` / 文字 `#92400E` | |
| ステータス: Draft | 背景 `#F3F4F6` / 文字 `#4B5563` | |
| ステータス: Deprecated | 背景 `#FEE2E2` / 文字 `#991B1B` | |

## 5. 将来の拡張余地

- **テーマ切替**: ダークモードへの反転表示（背景 `#111827`、アクセント `#60A5FA` など）。
- **分割ノードテンプレート**: よく使う分割レイアウトのプリセット保存。
- **トレーサビリティオーバーレイ**: コネクタの混雑を避けるため、特定タイプのみを強調するハイライトレイヤーを追加。

---

本モック案をベースに、Figma 等でのビジュアル化や React コンポーネントのプロトタイピングへ発展させることを想定しています。
