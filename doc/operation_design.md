# カード編集アプリケーション - クイック操作ガイド

## 📋 目次

1. [基本操作](#基本操作)
2. [カード操作](#カード操作)
3. [トレーサビリティ管理](#トレーサビリティ管理)
4. [検索と置換](#検索と置換)
5. [キーボードショートカット](#キーボードショートカット)
6. [効率的な使い方のヒント](#効率的な使い方のヒント)

---

## 基本操作

### 📂 ファイルを開く

**方法1: メニューから**
1. メニューバー > `ファイル(F)` > `ファイルを開く`
2. ファイル選択ダイアログで `.txt` または `.md` ファイルを選択
3. 変換方法を選択（固定ルール / LLM）
4. `変換` をクリック

**方法2: ツールバーから**
- ツールバーの 📂 アイコンをクリック

**方法3: ドラッグ&ドロップ**
- ファイルをウィンドウにドラッグ&ドロップ

### 💾 保存

**上書き保存:**
- `CTRL + S` または ツールバーの 💾 アイコン

**名前を付けて保存:**
- `CTRL + SHIFT + S` または メニュー > `ファイル` > `名前を付けて保存`

### 🗂️ 複数ファイルの管理

**タブ機能:**
- 複数のカードファイルを同時に開ける
- タブをクリックして切り替え
- タブの `×` で閉じる
- 未保存のファイルには `●` マーカーが表示

**パネル分割:**
- 画面を左右/上下に分割して、複数ファイルを並べて表示可能
- パネル境界をドラッグしてサイズ調整

---

## カード操作

### 📑 カードの表示

**表示モード切替:**
- **詳細表示**: すべての情報を表示
  - カード情報種別アイコン、ステータスバッジ、内容、更新時刻
- **コンパクト表示**: 1行で表示
  - カード情報種別アイコン、ステータスバッジ、内容の1行目のみ

**カード情報種別アイコン:**
- 📑 見出し (heading)
- 📝 段落 (paragraph)
- • 箇条書き (bullet)
- 🖼️ 図 (figure)
- 📊 表 (table)
- 🧪 試験 (test)
- 💬 QA (qa)

**階層の展開/折りたたみ:**
**階層の展開/折りたたみ:**
- カードの左側の `▶` / `▼` ボタンをクリック
- または、カードを選択して:
  - `→` キー: 展開
  - `←` キー: 折りたたみ

**全体の展開/折りたたみ:**
- カードパネルツールバーの `▼` アイコン: すべて展開
- カードパネルツールバーの `▶` アイコン: すべて折りたたみ

**表示モードの切替:**
- カードパネルツールバーの `☰` アイコン: コンパクト表示/詳細表示をトグル

### ✏️ カードの編集

**内容の編集:**
1. カードをダブルクリック
2. テキストを編集
3. `ENTER` で確定、`ESC` でキャンセル

**ステータスの変更:**
1. ステータスバッジをクリック
2. ドロップダウンから選択:
   - `draft` (下書き) - 初期状態
   - `review` (レビュー中) - レビュー待ち
   - `approved` (承認済み) - 承認完了
   - `deprecated` (廃止) - 使用しない

**カード種別の変更:**
- カード種別アイコンをクリックしてドロップダウンから選択

### ➕ カードの追加

1. カードを選択
2. 右クリックメニューまたは `INSERT` キー
3. 追加位置を選択:
   - 前に追加
   - 後に追加
   - 子として追加

### 🗑️ カードの削除

1. カードを選択
2. `DELETE` キーまたは右クリック > `削除`
3. 確認ダイアログで `OK`

**注意:** 親カードを削除すると、すべての子カードも削除されます

### 🔀 カードの移動

**ドラッグ&ドロップ:**
1. カードをマウスでドラッグ
2. 移動先に青い挿入線が表示される
3. ドロップして移動完了

**階層の変更:**
- カードを別の階層にドラッグすることで階層変更
- 親カードにドロップすると子カードになる

**複数カードの移動:**
1. 複数カードを選択（`CTRL` + クリック）
2. いずれかのカードをドラッグ
3. 選択中のすべてのカードが移動

**キーボードでの移動:**
- `CTRL + ↑`: 上に移動
- `CTRL + ↓`: 下に移動
- `CTRL + →`: 階層を下げる（親の子になる）
- `CTRL + ←`: 階層を上げる（親と同じ階層になる）

### 🔘 複数選択

**離散選択:**
- `CTRL` + クリックで複数のカードを個別に選択

**連続選択:**
- 最初のカードをクリック
- `SHIFT` + 最後のカードをクリック
- 範囲内のすべてのカードが選択される

**全選択:**
- `CTRL + A`: 現在のファイルのすべてのカードを選択

### ↩️ Undo / Redo

**Undo（元に戻す）:**
- `CTRL + Z`
- 最大1000ステップまで遡れる

**Redo（やり直し）:**
- `CTRL + Y` または `CTRL + SHIFT + Z`

**履歴スコープ:**
- 設定で、ファイル単位 / 全ファイル共通 を選択可能

---

## トレーサビリティ管理

### 🔗 トレースの表示

**表示切替:**
- グローバルツールバーの 🔗 アイコンをクリック（トグル）
- または `CTRL + T`

**トレースタイプフィルタ:**
- グローバルツールバーのトレースタイプフィルタアイコンをクリック
- ドロップダウンでトレースタイプ毎にチェックボックスでON/OFFを選択

**コネクタの種類:**
- **実線 (→)**: トレース関係 (trace)
- **破線 (⇢)**: 詳細化関係 (refines)
- **点線 (··→)**: テスト関係 (tests)
- **太線 (⟹)**: 重複関係 (duplicates)
- **実線**: 要求満足 (satisfy)、関係 (relate)、特化 (specialize)

**方向性:**
- **片方向 (→)**: 左から右、または右から左
- **双方向 (↔)**: 相互関係
- **無方向 (—)**: 関連のみ

### ➕ トレースの作成

**方法1: ドラッグ&ドロップ**
1. 左パネルのカードの右側の接合点（●）をクリック
2. 右パネルの対象カードの左側の接合点までドラッグ
3. ドロップして接続
4. プロパティダイアログで詳細を設定

**方法2: 右クリックメニュー**
1. カードを選択
2. 右クリック > `トレースを追加`
3. 対象カードを選択
4. プロパティを設定

**接合点の色:**
- **青（●）**: トレース関係あり
- **グレー（○）**: トレース関係なし

### ✏️ トレースの編集

**プロパティ変更:**
1. コネクタを右クリック
2. `プロパティ` を選択
3. 種別、方向性、メモを編集

**端点の変更:**
- コネクタの端をドラッグして別のカードに接続

### 🗑️ トレースの削除

1. コネクタをクリックして選択
2. `DELETE` キーまたは右クリック > `削除`

### 🔦 トレースのハイライト

**自動ハイライト:**
- カードを選択すると、関連するすべてのトレースとカードがハイライト表示される
- ハイライト色: オレンジ
- 非関連要素: 半透明化

---

## 検索と置換

### 🔍 検索

**基本検索:**
1. サイドバーの検索ボックスに検索語を入力
2. または `CTRL + F` で検索ダイアログを開く
3. 結果がリアルタイムで表示される

**検索オプション:**
- **大文字小文字を区別**: チェックボックスで切替
- **正規表現**: チェックボックスで切替
- **検索範囲**:
  - 現在のファイル
  - 開いているすべてのファイル
  - 指定フォルダ内のすべてのファイル

**カードパネルフィルタ:**
- **文字列フィルタ**: カードパネルツールバーのテキストボックスで検索
- **カード情報種別フィルタ**: カードパネルツールバーのドロップダウンで特定の種別のみ表示
- **トレース関係フィルタ**: カードパネルツールバーの🔽アイコンで選択中カードと関連するカードのみ表示
- フィルタの結果、階層が下のカードが対象となった場合は、そのカードに紐づく親階層のカードも表示される

**検索結果の操作:**
- 結果をクリックして該当カードにジャンプ
- `F3`: 次を検索
- `SHIFT + F3`: 前を検索

### 🔄 置換

1. `CTRL + H` で置換ダイアログを開く
2. 「検索」と「置換後」のテキストを入力
3. 以下のいずれかを選択:
   - `置換`: 現在の該当箇所を置換
   - `すべて置換`: すべての該当箇所を置換
   - `次を検索`: 置換せずに次へ

**注意:** 
- 置換は元に戻せるため、`CTRL + Z` で復元可能
- 大量の置換前にバックアップを推奨

---

## キーボードショートカット

### ファイル操作

| ショートカット | 動作 |
|---------------|------|
| `CTRL + O` | ファイルを開く |
| `CTRL + S` | 上書き保存 |
| `CTRL + SHIFT + S` | 名前を付けて保存 |
| `CTRL + W` | タブを閉じる |
| `CTRL + Q` | アプリケーション終了 |

### 編集操作

| ショートカット | 動作 |
|---------------|------|
| `CTRL + Z` | Undo（元に戻す） |
| `CTRL + Y` | Redo（やり直し） |
| `CTRL + C` | コピー |
| `CTRL + X` | カット |
| `CTRL + V` | ペースト |
| `DELETE` | 削除 |
| `INSERT` | 新規カード追加 |

### カード操作

| ショートカット | 動作 |
|---------------|------|
| `↑` / `↓` | カード選択移動 |
| `→` | 展開 |
| `←` | 折りたたみ |
| `CTRL + ↑` / `↓` | カード移動 |
| `CTRL + →` / `←` | 階層変更 |
| `ENTER` | 編集モードに |
| `ESC` | 編集キャンセル |
| `CTRL + A` | すべて選択 |

### 表示操作

| ショートカット | 動作 |
|---------------|------|
| `CTRL + F` | 検索 |
| `CTRL + H` | 置換 |
| `F3` | 次を検索 |
| `SHIFT + F3` | 前を検索 |
| `CTRL + B` | サイドバー表示切替 |
| `CTRL + L` | ログエリア表示切替 |
| `CTRL + T` | トレース表示切替 |
| `CTRL + 1` | 詳細表示 |
| `CTRL + 2` | コンパクト表示 |

---

## 効率的な使い方のヒント

### 💡 ベストプラクティス

**1. 階層構造の活用**
- 大きなドキュメントは、見出しを使って階層化
- 関連するカードを親子関係でグループ化
- 折りたたみ機能で必要な部分だけ表示

**2. ステータス管理**
- カードの進捗を `draft` → `review` → `approved` で管理
- 廃止されたカードは `deprecated` に設定
- カード情報種別フィルタで作業箇所を特定

**3. トレーサビリティの活用**
- 仕様書と設計書を左右に配置してトレース作成
- 重複する内容を `duplicates` 関係で可視化
- テストケースと仕様を `tests` 関係で紐付け
- 要求仕様の満足を `satisfy` 関係で追跡
- 詳細化関係を `refines` で管理
- 一般的な関連を `relate` で表現
- 特化関係を `specialize` で管理

**4. 検索とフィルタの活用**
- 正規表現で高度な検索
- トレース関係フィルタで影響範囲を特定
- フォルダ検索で複数ファイルを横断検索
- カード情報種別フィルタで特定の種類のカードのみ表示

**5. パネル分割**
- グローバルツールバーの左右分割/上下分割ボタンで画面を分割
- 最大16分割で複数ファイルを同時表示
- 関連ファイルを並べて効率的に作業
- リサイズで作業領域を最適化

### ⚙️ カスタマイズ

**設定のカスタマイズ:**
1. メニュー > `編集` > `設定`
2. 以下の設定を調整:
   - テーマ（ライト / ダーク / システム）
   - フォントサイズとファミリー
   - ショートカットキー
   - 自動保存間隔
   - Undo履歴深度

**ウィンドウレイアウト:**
- サイドバー、ログエリアのサイズをドラッグで調整
- パネルの分割数と配置を自由に変更
- 設定は自動保存され、次回起動時に復元

### 🚀 パフォーマンス最適化

**大量カード処理:**
- 仮想スクロールで10,000カード以上を高速表示
- 折りたたみ機能で表示カード数を削減
- コンパクト表示で描画負荷を軽減

**ファイル管理:**
- 不要なタブを閉じてメモリ節約
- 定期的に保存して作業を守る
- 自動保存機能を有効化

**トレース表示:**
- 不要な時はトレース表示をOFFに（`CTRL + T`）
- 複雑なトレースはフィルタで絞り込み

### 🔒 安全な作業

**バックアップ:**
- 入力ファイルは `_input/` に自動コピーされる
- 定期的に `_out/` フォルダをバックアップ

**外部変更の検知:**
- 外部でファイルが変更された場合、再読込確認ダイアログ表示
- 未保存の変更がある場合は警告

**終了時の確認:**
- 未保存の変更がある場合、終了時に確認ダイアログ表示
- 「保存して終了」を選択して安全に終了

---

## ❓ よくある質問（FAQ）

**Q: カードが多すぎて画面が重いです**
A: 以下を試してください:
- カードパネルツールバーでコンパクト表示に切替（☰アイコン）
- 不要な階層を折りたたみ（カードの▶ボタン、またはカードパネルツールバーの▶アイコン）
- トレース表示をOFF（グローバルツールバーの🔗アイコン）
- カードパネルフィルタで表示カードを絞り込み

**Q: 誤ってカードを削除してしまいました**
A: `CTRL + Z` で復元できます（最大1000ステップ）

**Q: トレースが多すぎて見づらいです**
A: 以下を試してください:
- 一時的にトレース表示をOFF（グローバルツールバーの🔗アイコン）
- トレースタイプフィルタで必要なトレースのみ表示（グローバルツールバー）
- カード選択で関連トレースのみハイライト

**Q: ショートカットキーを変更したいです**
A: メニュー > `編集` > `設定` > `ショートカット` でカスタマイズ可能です

**Q: ダークモードに切り替えたいです**
A: メニュー > `編集` > `設定` > `外観` > テーマで切替可能です

---

## 📞 サポート

**バージョン情報:**
- メニュー > `ヘルプ` > `バージョン情報` で確認

**ログの確認:**
- ログエリアで動作ログを確認
- 詳細ログは `_logs/` フォルダに保存

**問題報告:**
- 問題が発生した場合は、ログファイルと操作手順を記録して報告

---

**最終更新**: 2025-10-19  
**バージョン**: 1.0
